function e(){import.meta.url,import("_").catch((()=>1)),async function*(){}().next()}import{d as a,H as t,I as n,J as l,K as s,L as o,M as r,N as i,c,O as d,F as u,P as p,Q as v,R as m,r as h,o as y,S as g,U as f,w,V as k,W as b,E as x,b as C,X as _,Y as M,Z as F,_ as B}from"./vue-vendor--Sor-fzI.js";import{u as z,s as D}from"./game-core-BHZdpYGh.js";import{N as P,a as S,B as j,b as U,c as A,d as N,e as O,f as E,g as I,h as T,i as L,j as H,k as J,l as W,m as G,n as V,o as q,p as R,q as $,r as K,s as X,t as Q,u as Y,S as Z,v as ee,w as ae,x as te,y as ne,z as le,A as se,C as oe,D as re}from"./naive-ui-Bd6WkFNw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const ie={class:"cell-content"},ce={key:0,class:"property-bg"},de={class:"cell-header"},ue={class:"cell-icon"},pe={class:"cell-name"},ve={class:"cell-info"},me={class:"cell-price"},he={key:0,class:"owner-mark"},ye={key:1,class:"cell-effect"},ge={class:"effect-icon"},fe={class:"players-wrapper"},we={key:0,class:"players"},ke=["data-player-id"],be=(e,a)=>{const t=e.__vccOpts||e;for(const[n,l]of a)t[n]=l;return t},xe=be(a({__name:"Cell",props:{cell:{},players:{}},setup(e){const a=z(),h=e=>({start:"🎯",property:"🏘️",chance:"✨",birthday:"🎉",tax:"💰"}[e]||"✨"),y=["#FFB5B5","#FFD1B5","#FFFFB5","#B5FFB5","#B5FFFF","#B5B5FF","#FFB5FF","#FFE4E1","#E6E6FA","#98FB98","#87CEFA","#DDA0DD","#F0E68C","#E0FFFF","#FFDAB9","#D8BFD8"],g=e=>{if("property"===e.type){const a=e.id%y.length,t=y[a];return{background:"linear-gradient(135deg, ".concat(t,"66 0%, rgba(255, 255, 255, 0.3) 100%)"),"--property-color":t}}return{}};return(e,y)=>{return t(),n("div",{class:v(["cell",[e.cell.type,{"has-players":e.players.length>0,"side-cell":(w=e.cell.id,w>=9&&w<15||w>=25&&w<31)}]]),style:p(g(e.cell))},[l("div",ie,[y[1]||(y[1]=l("div",{class:"cell-type-indicator"},null,-1)),"property"===e.cell.type?(t(),n("div",ce)):s("",!0),l("div",de,[l("div",ue,o((f=e.cell.type,{start:"🏁",property:"🏠",chance:"🎲",birthday:"🎂",tax:"💸"}[f]||"🎯")),1),r(d(P),{trigger:"hover",placement:"top"},{trigger:i((()=>[l("div",pe,o(e.cell.name),1)])),default:i((()=>[c(" "+o(e.cell.name),1)])),_:1})]),l("div",ve,[e.cell.price?(t(),n(u,{key:0},[l("div",me,[r(d(S),{size:"tiny",type:"success",round:"",class:"price-tag"},{icon:i((()=>y[0]||(y[0]=[l("div",{class:"money-icon"},"💰",-1)]))),default:i((()=>[c(" "+o(e.cell.price.toLocaleString()),1)])),_:1})]),void 0!==e.cell.owner?(t(),n("div",he,[r(d(P),{trigger:"hover",placement:"bottom"},{trigger:i((()=>{return[l("div",{class:"owner-avatar",style:p({backgroundImage:"url(/avatar".concat(e.cell.owner+1,".png)"),borderColor:(t=e.cell.owner,(null==(n=a.players.find((e=>e.id===t)))?void 0:n.color)||"#ccc")})},null,4)];var t,n})),default:i((()=>{return[c(" "+o("".concat((t=e.cell.owner,(null==(n=a.players.find((e=>e.id===t)))?void 0:n.name)||"未知玩家"),"的地产")),1)];var t,n})),_:1})])):s("",!0)],64)):s("",!0),e.cell.effect?(t(),n("div",ye,[r(d(P),{trigger:"hover",placement:"bottom"},{trigger:i((()=>[l("div",{class:v(["effect-text",{"start-effect":"start"===e.cell.type}])},[l("span",ge,o(h(e.cell.type)),1),c(" "+o(e.cell.effect),1)],2)])),default:i((()=>[c(" "+o(e.cell.effect),1)])),_:1})])):s("",!0)])]),l("div",fe,[e.players.length?(t(),n("div",we,[(t(!0),n(u,null,m(e.players,(e=>(t(),n("div",{key:e.id,class:v(["player-token",{"current-player":d(a).currentPlayer===e.id}]),"data-player-id":e.id,style:p({backgroundImage:"url(/avatar".concat(e.id+1,".png)"),borderColor:e.color,"--glow-color":e.color})},null,14,ke)))),128))])):s("",!0)])],6);var f,w}}}),[["__scopeId","data-v-f5753172"]]),Ce={class:"dice-container"},_e={class:"dice-inner"},Me={key:0,class:"dot"},Fe={class:"dice-label"},Be=be(a({__name:"Dice",props:{disabled:{type:Boolean}},emits:["roll"],setup(e,{emit:a}){const p=e,f=a,w=h(1),k=h(!1),b=async e=>{if(!p.disabled&&!k.value){k.value=!0;try{D.play("roll");for(let e=0;e<8;e++)w.value=Math.floor(6*Math.random())+1,await new Promise((e=>setTimeout(e,100)));const a=void 0!==e?e:Math.floor(6*Math.random())+1;w.value=a,D.stop("roll"),await new Promise((e=>setTimeout(e,300))),k.value=!1,f("roll",a)}catch(a){D.stop("roll"),k.value=!1}}},x=e=>{if(e.altKey&&e.key>="1"&&e.key<="6"){const a=parseInt(e.key);b(a)}};return y((()=>{window.addEventListener("keydown",x)})),g((()=>{window.removeEventListener("keydown",x)})),(e,a)=>(t(),n("div",Ce,[l("div",{class:v(["dice",{disabled:e.disabled,rolling:k.value}]),onClick:a[0]||(a[0]=()=>b())},[l("div",_e,[l("div",{class:v(["dice-dots","dots-".concat(w.value)])},[(t(),n(u,null,m(9,(e=>{return l("div",{key:e,class:"dot-position"},[(a=w.value,o=e,(null==(r={1:[5],2:[1,9],3:[1,5,9],4:[1,3,7,9],5:[1,3,5,7,9],6:[1,3,4,6,7,9]}[a])?void 0:r.includes(o))?(t(),n("div",Me)):s("",!0))]);var a,o,r})),64))],2)]),a[1]||(a[1]=l("div",{class:"dice-shadow"},null,-1))],2),l("div",Fe,[r(d(S),{type:e.disabled?"warning":"success",round:"",size:"small"},{default:i((()=>[c(o(e.disabled?"等待其他玩家":"点击骰子"),1)])),_:1},8,["type"])])]))}}),[["__scopeId","data-v-a0c39c58"]]),ze={class:"game-container"},De={class:"game-board"},Pe={class:"board-grid"},Se={class:"board-row top"},je={class:"board-sides"},Ue={class:"board-column left"},Ae={class:"board-center"},Ne={class:"center-content"},Oe={class:"board-column right"},Ee={class:"board-row bottom"},Ie=be(a({__name:"GameBoard",setup(e){const a=z(),s=e=>a.players.filter((a=>a.position===e)),o=e=>{a.movePlayer(e)};return(e,i)=>(t(),n("div",ze,[l("div",De,[l("div",Pe,[l("div",Se,[(t(),n(u,null,m(9,(e=>r(xe,{key:"top-".concat(e-1),cell:d(a).cells[e-1],players:s(e-1)},null,8,["cell","players"]))),64))]),l("div",je,[l("div",Ue,[(t(),n(u,null,m(7,(e=>r(xe,{key:"left-".concat(31-e+1),cell:d(a).cells[31-e+1],players:s(31-e+1)},null,8,["cell","players"]))),64))]),l("div",Ae,[l("div",Ne,[i[0]||(i[0]=l("div",{class:"game-logo"},[l("span",{class:"logo-text"},"芋泥生日快乐❤"),l("span",{class:"logo-emoji"},"🎂")],-1)),r(Be,{onRoll:o,disabled:!d(a).isCurrentPlayersTurn||d(a).isMoving},null,8,["disabled"])])]),l("div",Oe,[(t(),n(u,null,m(7,(e=>r(xe,{key:"right-".concat(e+8),cell:d(a).cells[e+8],players:s(e+8)},null,8,["cell","players"]))),64))])]),l("div",Ee,[(t(),n(u,null,m(9,(e=>r(xe,{key:"bottom-".concat(24-e+1),cell:d(a).cells[24-e+1],players:s(24-e+1)},null,8,["cell","players"]))),64))])])])]))}}),[["__scopeId","data-v-f64a2860"]]),Te={class:"background"},Le={class:"clouds"},He={class:"floating-items"},Je={class:"bubbles"},We=be(a({__name:"Background",setup(e){const a=["🎂","🎁","🎈","🎊","✨","🎯","🎪","🎨","🎭","🎡","🎢","🎵","🎶","🌟","🍰","🧁","🍭","🍬","🎪","🎠"],s=e=>{const a=15+40*Math.random();return{left:"".concat(100*Math.random(),"%"),width:"".concat(a,"px"),height:"".concat(a,"px"),animationDelay:"".concat(-.2*e,"s"),animationDuration:"".concat(3+4*Math.random(),"s")}};return(e,r)=>(t(),n("div",Te,[r[1]||(r[1]=l("div",{class:"stars"},null,-1)),l("div",Le,[(t(),n(u,null,m(8,(e=>{return l("div",{key:"cloud-".concat(e),class:"cloud",style:p((a=e,{left:"".concat(30*a-20,"%"),top:"".concat(10+20*Math.random(),"%"),transform:"scale(".concat(.8+.4*Math.random(),")"),animationDelay:"".concat(10*-a,"s"),animationDuration:"".concat(30+20*Math.random(),"s")}))},null,4);var a})),64))]),l("div",He,[(t(),n(u,null,m(20,(e=>{return l("div",{key:e,class:"item",style:p((t=e,{left:"".concat(5*t,"%"),animationDelay:"".concat(-.5*t,"s"),animationDuration:"".concat(6+.5*t,"s"),fontSize:"".concat(1.2+Math.random(),"rem"),filter:"hue-rotate(".concat(20*t,"deg)")}))},o(a[Math.floor(Math.random()*a.length)]),5);var t})),64))]),r[2]||(r[2]=f('<div class="decorations" data-v-407635bf><div class="corner-decoration top-left" data-v-407635bf>🎀</div><div class="corner-decoration top-right" data-v-407635bf>🎈</div><div class="corner-decoration bottom-left" data-v-407635bf>🎪</div><div class="corner-decoration bottom-right" data-v-407635bf>🎨</div></div>',1)),l("div",Je,[(t(),n(u,null,m(20,(e=>l("div",{key:"bubble-".concat(e),class:"bubble",style:p(s(e))},r[0]||(r[0]=[l("div",{class:"bubble-inner"},null,-1)]),4))),64))]),r[3]||(r[3]=l("div",{class:"gradient-overlay"},null,-1))]))}}),[["__scopeId","data-v-407635bf"]]),Ge={key:0,class:"chance-card-animation"},Ve={class:"cards-container"},qe=["onClick"],Re={class:"card-back"},$e={class:"card-content"},Ke={class:"card-icon"},Xe={class:"card-title"},Qe=be(a({__name:"ChanceCardAnimation",props:{show:{type:Boolean},cardData:{}},emits:["finish"],setup(e,{emit:a}){const r=e,i=a,c=h(null);let d=null,f=null,k=[];const b=h(0),x=h(!1),C=h(!1),_=()=>{const e=c.value;e&&(e.width=window.innerWidth,e.height=window.innerHeight,d=e.getContext("2d"),M())},M=()=>{k=[];for(let e=0;e<100;e++)k.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5),size:4*Math.random()+1,color:"hsl(".concat(360*Math.random(),", 50%, 50%)"),alpha:Math.random()})},F=()=>{d&&(d.clearRect(0,0,window.innerWidth,window.innerHeight),k.forEach((e=>{e.x+=e.vx,e.y+=e.vy,e.alpha=Math.max(0,e.alpha-.005),e.x<0&&(e.x=window.innerWidth),e.x>window.innerWidth&&(e.x=0),e.y<0&&(e.y=window.innerHeight),e.y>window.innerHeight&&(e.y=0),d.beginPath(),d.arc(e.x,e.y,e.size,0,2*Math.PI),d.fillStyle="".concat(e.color).concat(Math.floor(255*e.alpha).toString(16).padStart(2,"0")),d.fill()})),Math.random()<.1&&k.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:2*(Math.random()-.5),vy:2*(Math.random()-.5),size:4*Math.random()+1,color:"hsl(".concat(360*Math.random(),", 50%, 50%)"),alpha:1}),f=requestAnimationFrame(F))},B=e=>{const a=100*e-100;return{transform:"rotate(".concat(10*e-10,"deg) translateX(").concat(a,"px)"),transitionDelay:"".concat(.1*e,"s")}},z=()=>{c.value&&(c.value.width=window.innerWidth,c.value.height=window.innerHeight)};return y((()=>{_(),F(),window.addEventListener("resize",z)})),g((()=>{f&&cancelAnimationFrame(f),window.removeEventListener("resize",z)})),w((()=>r.show),(e=>{e?(_(),F()):f&&cancelAnimationFrame(f)})),(e,a)=>e.show?(t(),n("div",Ge,[l("canvas",{ref_key:"canvasRef",ref:c,class:"animation-canvas"},null,512),l("div",Ve,[(t(),n(u,null,m(3,(t=>{var n,s,r,c,d,u;return l("div",{class:v(["card",{"card-selected":x.value,"card-revealed":C.value}]),key:t,style:p(B(t)),onClick:e=>(async e=>{x.value||(b.value=e,x.value=!0,await new Promise((e=>setTimeout(e,500))),C.value=!0,await new Promise((e=>setTimeout(e,1e3))),await new Promise((e=>setTimeout(e,1500))),i("finish"))})(t)},[a[0]||(a[0]=l("div",{class:"card-front"},[l("div",{class:"card-content"},[l("div",{class:"card-icon"},"🎲"),l("div",{class:"card-title"},"机会")])],-1)),l("div",Re,[l("div",$e,[l("div",Ke,o("success"===(null==(n=e.cardData)?void 0:n.type)?"🎉":"⚠️"),1),l("div",Xe,o(null==(s=e.cardData)?void 0:s.effect),1),l("div",{class:v(["card-amount",{positive:(null==(r=e.cardData)?void 0:r.amount)>0}])},o((null==(c=e.cardData)?void 0:c.amount)>0?"+":"")+"$"+o(null==(u=null==(d=e.cardData)?void 0:d.amount)?void 0:u.toLocaleString()),3)])])],14,qe)})),64))])])):s("",!0)}}),[["__scopeId","data-v-6e99fc5d"]]),Ye={class:"dialog-header"},Ze={class:"dialog-icon"},ea={class:"dialog-title"},aa={class:"dialog-content"},ta={class:"dialog-actions"},na=be(a({__name:"Dialog",props:{show:{type:Boolean},title:{},message:{},type:{},action:{type:Function},component:{},props:{}},emits:["close","action","update:show"],setup(e,{emit:a}){const n=e,s=a,u=()=>{s("close"),s("update:show",!1)},p=()=>{s("action"),s("update:show",!1)},v=e=>{e||s("close"),s("update:show",e)};return(e,a)=>"ChanceCardAnimation"===e.component&&(null==n?void 0:n.cardData)?(t(),k(Qe,{key:0,show:e.show,cardData:n.cardData,onFinish:p},null,8,["show","cardData"])):(t(),k(d(U),{key:1,show:e.show,"mask-closable":!0,title:e.title,type:e.type,"show-icon":!0,"onUpdate:show":v,class:"cute-dialog",preset:"card",style:{width:"400px","max-width":"90vw"}},b({header:i((()=>{return[l("div",Ye,[l("div",Ze,o((a=e.type,{info:"💡",success:"🎉",warning:"⚠️",error:"❌"}[a]||"💭")),1),l("div",ea,o(e.title),1)])];var a})),default:i((()=>[l("div",aa,o(e.message),1)])),_:2},[e.action?{name:"action",fn:i((()=>[l("div",ta,[r(d(j),{type:"primary",round:"",size:"medium",class:"action-btn",onClick:p},{default:i((()=>a[0]||(a[0]=[c(" 确定 ")]))),_:1}),r(d(j),{round:"",size:"medium",class:"cancel-btn",onClick:u},{default:i((()=>a[1]||(a[1]=[c(" 取消 ")]))),_:1})])])),key:"0"}:void 0]),1032,["show","title","type"]))}}),[["__scopeId","data-v-fac0d76d"]]),la={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},sa=[f('<rect x="32" y="80" width="448" height="256" rx="16" ry="16" transform="rotate(180 256 208)" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M64 384h384"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M96 432h320"></path><circle cx="256" cy="208" r="80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><path d="M480 160a80 80 0 0 1-80-80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M32 160a80 80 0 0 0 80-80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M480 256a80 80 0 0 0-80 80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M32 256a80 80 0 0 1 80 80" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>',8)],oa=a({name:"CashOutline",render:function(e,a){return t(),n("svg",la,sa)}}),ra={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ia=[f('<path d="M256 104v56h56a56 56 0 1 0-56-56z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></path><path d="M256 104v56h-56a56 56 0 1 1 56-56z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></path><rect x="64" y="160" width="384" height="112" rx="32" ry="32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></rect><path d="M416 272v144a48 48 0 0 1-48 48H144a48 48 0 0 1-48-48V272" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 160v304"></path>',5)],ca=a({name:"GiftOutline",render:function(e,a){return t(),n("svg",ra,ia)}}),da={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ua=[l("path",{d:"M256 80a176 176 0 1 0 176 176A176 176 0 0 0 256 80z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),l("path",{d:"M200 202.29s.84-17.5 19.57-32.57C230.68 160.77 244 158.18 256 158c10.93-.14 20.69 1.67 26.53 4.45c10 4.76 29.47 16.38 29.47 41.09c0 26-17 37.81-36.37 50.8S251 281.43 251 296",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"28"},null,-1),l("circle",{cx:"250",cy:"348",r:"20",fill:"currentColor"},null,-1)],pa=a({name:"HelpCircleOutline",render:function(e,a){return t(),n("svg",da,ua)}}),va={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ma=[l("path",{d:"M80 212v236a16 16 0 0 0 16 16h96V328a24 24 0 0 1 24-24h80a24 24 0 0 1 24 24v136h96a16 16 0 0 0 16-16V212",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),l("path",{d:"M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 179V64h-48v69"},null,-1)],ha=a({name:"HomeOutline",render:function(e,a){return t(),n("svg",va,ma)}}),ya={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ga=[l("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M352 256l-96 224l-62-145"},null,-1),l("path",{d:"M299.42 223.48C291.74 239.75 275.18 252 256 252c-13.1 0-27-5-33.63-9.76C216.27 237.87 208 240 208 250v62a24.07 24.07 0 0 1-24 24h0a24.07 24.07 0 0 1-24-24v-56h-2c-35.35 0-62-28.65-62-64a64 64 0 0 1 64-64h8v-8a88 88 0 0 1 176 0v8h8a64 64 0 0 1 0 128c-21.78 0-42-13-52.59-32.51z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],fa=a({name:"IceCreamOutline",render:function(e,a){return t(),n("svg",ya,ga)}}),wa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ka=[l("rect",{x:"48",y:"144",width:"416",height:"288",rx:"48",ry:"48",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),l("path",{d:"M411.36 144v-30A50 50 0 0 0 352 64.9L88.64 109.85A50 50 0 0 0 48 159v49",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),l("path",{d:"M368 320a32 32 0 1 1 32-32a32 32 0 0 1-32 32z",fill:"currentColor"},null,-1)],ba=a({name:"WalletOutline",render:function(e,a){return t(),n("svg",wa,ka)}}),xa={class:"settings-container"},Ca={class:"settings-section"},_a={class:"setting-item"},Ma={class:"setting-item"},Fa={class:"player-names-settings"},Ba={class:"player-names-list"},za={class:"settings-section"},Da={class:"cell-types"},Pa={class:"cell-type-header"},Sa={class:"cell-type-name"},ja={class:"cell-type-settings"},Ua={class:"settings-section"},Aa={class:"chance-cards-header"},Na={class:"header-left"},Oa={class:"header-right"},Ea={class:"chance-cards-container"},Ia={class:"chance-cards"},Ta={class:"chance-card-content"},La={class:"card-probability"},Ha={class:"settings-actions"},Ja=be(a({__name:"GameSettings",emits:["save","cancel"],setup(e,{emit:a}){const v=z(),h=x({initialMoney:v.settings.initialMoney,startBonus:v.settings.startBonus,cellCounts:{...v.settings.cellCounts},propertyMinPrice:v.settings.propertyMinPrice,propertyMaxPrice:v.settings.propertyMaxPrice,taxAmount:v.settings.taxAmount,birthdayBonus:v.settings.birthdayBonus,chanceCards:JSON.parse(JSON.stringify(v.settings.chanceCards)),playerNames:[...v.settings.playerNames]});y((()=>{h.initialMoney=v.settings.initialMoney,h.startBonus=v.settings.startBonus,h.cellCounts={...v.settings.cellCounts},h.propertyMinPrice=v.settings.propertyMinPrice,h.propertyMaxPrice=v.settings.propertyMaxPrice,h.taxAmount=v.settings.taxAmount,h.birthdayBonus=v.settings.birthdayBonus,h.chanceCards=JSON.parse(JSON.stringify(v.settings.chanceCards)),h.playerNames=[...v.settings.playerNames]}));const g=a,f=[{key:"start",name:"起点",icon:oa,min:1,max:1},{key:"property",name:"地产",icon:ha,min:12,max:24},{key:"chance",name:"机会",icon:ca,min:4,max:8},{key:"birthday",name:"生日",icon:fa,min:2,max:4},{key:"tax",name:"税收",icon:ba,min:2,max:4}],w=[{label:"奖励",value:"success"},{label:"惩罚",value:"warning"}],b=({focused:e,checked:a})=>{const t={};return a?(t.background="#FF8FB1",e&&(t.boxShadow="0 0 0 2px #FFC2D4")):(t.background="#7C5CFF",e&&(t.boxShadow="0 0 0 2px #9E85FF")),t},F=()=>{D.play("click");const e=h.chanceCards.reduce(((e,a)=>e+(a.probability||0)),0),a=Math.max(0,100-e);if(0===a){const e=Math.floor(100/(h.chanceCards.length+1));h.chanceCards.forEach((a=>{a.probability=e})),h.chanceCards.push({effect:"",amount:0,type:"success",probability:e,oneTime:!1})}else{const e=Math.floor(a/2);h.chanceCards.push({effect:"",amount:0,type:"success",probability:e,oneTime:!1})}},B=()=>{D.play("click");const e=h.chanceCards.reduce(((e,a)=>e+(a.probability||0)),0);if(100!==e){const a=h.chanceCards[h.chanceCards.length-1];a&&(a.probability+=100-e)}g("save",JSON.parse(JSON.stringify(h)))},S=()=>{D.play("click"),Object.assign(h,JSON.parse(JSON.stringify(v.settings)))},U=e=>e.oneTime&&e.used?"0.0":e.probability.toFixed(1),J=C((()=>h.chanceCards.reduce(((e,a)=>a.oneTime&&a.used?e:e+(a.probability||0)),0))),W=C((()=>h.chanceCards.filter((e=>e.oneTime)).length)),G=C((()=>h.chanceCards.filter((e=>!e.oneTime)).length));return(e,a)=>{const v=_("n-tag");return t(),n("div",xa,[r(d(H),{type:"line",animated:"",class:"settings-tabs"},{default:i((()=>[r(d(A),{name:"basic",tab:"基础设置"},{default:i((()=>[l("div",Ca,[l("div",_a,[a[7]||(a[7]=l("span",{class:"setting-label"},"初始资金：",-1)),r(d(N),{value:h.initialMoney,"onUpdate:value":a[0]||(a[0]=e=>h.initialMoney=e),min:5e3,max:5e4,step:1e3,size:"large"},{prefix:i((()=>a[6]||(a[6]=[c("$")]))),_:1},8,["value"])]),l("div",Ma,[a[9]||(a[9]=l("span",{class:"setting-label"},"经过起点奖励：",-1)),r(d(N),{value:h.startBonus,"onUpdate:value":a[1]||(a[1]=e=>h.startBonus=e),min:1e3,max:1e4,step:500,size:"large"},{prefix:i((()=>a[8]||(a[8]=[c("$")]))),_:1},8,["value"])]),l("div",Fa,[a[10]||(a[10]=l("div",{class:"section-title"},"默认玩家名字",-1)),l("div",Ba,[(t(!0),n(u,null,m(h.playerNames,((e,a)=>(t(),n("div",{key:a,class:"player-name-item"},[l("div",{class:"player-avatar",style:p({backgroundImage:"url(/avatar".concat(a+1,".png)")})},null,4),r(d(O),{value:h.playerNames[a],"onUpdate:value":e=>h.playerNames[a]=e,placeholder:"输入玩家名字",size:"medium"},{prefix:i((()=>[c("玩家"+o(a+1),1)])),_:2},1032,["value","onUpdate:value"])])))),128))])])])])),_:1}),r(d(A),{name:"cells",tab:"格子设置"},{default:i((()=>[l("div",za,[l("div",Da,[(t(),n(u,null,m(f,(e=>l("div",{key:e.key,class:"cell-type-item"},[l("div",Pa,[r(d(E),{size:"24"},{default:i((()=>[(t(),k(M(e.icon)))])),_:2},1024),l("span",Sa,o(e.name),1)]),l("div",ja,[r(d(N),{value:h.cellCounts[e.key],"onUpdate:value":a=>h.cellCounts[e.key]=a,min:e.min,max:e.max,size:"medium",placeholder:"数量"},{prefix:i((()=>a[11]||(a[11]=[c("数量")]))),_:2},1032,["value","onUpdate:value","min","max"]),"property"===e.key?(t(),n(u,{key:0},[r(d(N),{value:h.propertyMinPrice,"onUpdate:value":a[2]||(a[2]=e=>h.propertyMinPrice=e),min:1e3,max:h.propertyMaxPrice,step:500,size:"medium"},{prefix:i((()=>a[12]||(a[12]=[c("最低价")]))),_:1},8,["value","max"]),r(d(N),{value:h.propertyMaxPrice,"onUpdate:value":a[3]||(a[3]=e=>h.propertyMaxPrice=e),min:h.propertyMinPrice,max:5e4,step:500,size:"medium"},{prefix:i((()=>a[13]||(a[13]=[c("最高价")]))),_:1},8,["value","min"])],64)):s("",!0),"tax"===e.key?(t(),k(d(N),{key:1,value:h.taxAmount,"onUpdate:value":a[4]||(a[4]=e=>h.taxAmount=e),min:100,max:5e3,step:100,size:"medium"},{prefix:i((()=>a[14]||(a[14]=[c("税金")]))),_:1},8,["value"])):s("",!0),"birthday"===e.key?(t(),k(d(N),{key:2,value:h.birthdayBonus,"onUpdate:value":a[5]||(a[5]=e=>h.birthdayBonus=e),min:500,max:5e3,step:100,size:"medium"},{prefix:i((()=>a[15]||(a[15]=[c("奖励")]))),_:1},8,["value"])):s("",!0)])]))),64))])])])),_:1}),r(d(A),{name:"chance",tab:"机会卡设置"},{default:i((()=>[l("div",Ua,[l("div",Aa,[l("div",Na,[r(d(j),{onClick:F,type:"primary",class:"add-card-btn"},{default:i((()=>a[16]||(a[16]=[c(" 添加机会卡 ")]))),_:1}),r(d(P),{trigger:"hover"},{trigger:i((()=>[r(d(E),{size:"20",class:"help-icon"},{default:i((()=>[r(d(pa))])),_:1})])),default:i((()=>[a[17]||(a[17]=c(" 权重值决定抽中概率，权重越大概率越高。总权重为所有卡片权重之和，每张卡的概率为：该卡权重/总权重。 "))])),_:1})]),l("div",Oa,[r(v,{type:"info",round:""},{default:i((()=>[c(" 共 "+o(h.chanceCards.length)+" 张机会卡 ",1)])),_:1}),r(v,{type:"success",round:""},{default:i((()=>[c(" 一次性: "+o(W.value)+" 张 ",1)])),_:1}),r(v,{type:"warning",round:""},{default:i((()=>[c(" 重复: "+o(G.value)+" 张 ",1)])),_:1}),r(v,{type:J.value>100?"error":"info",round:""},{default:i((()=>[c(" 总概率: "+o(J.value)+"% ",1)])),_:1},8,["type"]),r(v,{type:"success",round:""},{default:i((()=>[c(" 无事发生: "+o(Math.max(0,100-J.value).toFixed(1))+"% ",1)])),_:1})])]),l("div",Ea,[l("div",Ia,[(t(!0),n(u,null,m(h.chanceCards,((e,n)=>(t(),k(d(L),{key:n,size:"small",class:"chance-card"},{default:i((()=>[l("div",Ta,[r(d(O),{value:e.effect,"onUpdate:value":a=>e.effect=a,placeholder:"效果描述",size:"small"},null,8,["value","onUpdate:value"]),r(d(N),{value:e.amount,"onUpdate:value":a=>e.amount=a,placeholder:"金额",size:"small"},{prefix:i((()=>a[18]||(a[18]=[c("$")]))),_:2},1032,["value","onUpdate:value"]),r(d(N),{value:e.probability,"onUpdate:value":[a=>e.probability=a,a=>((e,a,t)=>{const n=a-t,l=h.chanceCards.filter((a=>a!==e));if(0===l.length)return void(e.probability=100);const s=Math.floor(Math.abs(n)/l.length),o=Math.abs(n)%l.length;l.forEach(((e,a)=>{n>0?e.probability=Math.max(0,e.probability-s-(a<o?1:0)):e.probability+=s+(a<o?1:0)}))})(e,a,e.probability)],placeholder:"概率",min:0,max:100,step:1,size:"small"},{prefix:i((()=>a[19]||(a[19]=[c("概率")]))),suffix:i((()=>a[20]||(a[20]=[c("%")]))),_:2},1032,["value","onUpdate:value"]),r(d(I),{value:e.type,"onUpdate:value":a=>e.type=a,options:w,size:"small"},null,8,["value","onUpdate:value"]),r(d(T),{value:e.oneTime,"onUpdate:value":a=>e.oneTime=a,size:"small","rail-style":b},{checked:i((()=>a[21]||(a[21]=[c("一次性")]))),unchecked:i((()=>a[22]||(a[22]=[c("重复")]))),_:2},1032,["value","onUpdate:value"]),l("div",La,[r(d(P),{trigger:"hover"},{trigger:i((()=>[l("span",null,o(U(e))+"%",1)])),default:i((()=>[c(" 实际概率 = 设置概率 × "+o(e.oneTime&&e.used?"0":"1"),1)])),_:2},1024)]),r(d(j),{circle:"",type:"error",size:"small",onClick:e=>(e=>{D.play("click");const a=h.chanceCards[e];if(h.chanceCards.splice(e,1),h.chanceCards.length>0){const e=a.probability,t=Math.floor(e/h.chanceCards.length),n=e%h.chanceCards.length;h.chanceCards.forEach(((e,a)=>{e.probability+=t,a<n&&(e.probability+=1)}))}})(n)},{default:i((()=>a[23]||(a[23]=[c(" × ")]))),_:2},1032,["onClick"])])])),_:2},1024)))),128))])])])])),_:1})])),_:1}),l("div",Ha,[r(d(j),{type:"primary",size:"large",onClick:B},{default:i((()=>a[24]||(a[24]=[c(" 保存设置 ")]))),_:1}),r(d(j),{size:"large",onClick:S},{default:i((()=>a[25]||(a[25]=[c(" 重置默认 ")]))),_:1})])])}}}),[["__scopeId","data-v-23445909"]]),Wa={class:"app"},Ga={class:"game-container"},Va={key:0,class:"start-screen"},qa={class:"welcome-content"},Ra={class:"player-select"},$a={class:"btn-content"},Ka={class:"btn-icon"},Xa={class:"btn-text"},Qa={class:"settings-wrapper"},Ya={key:1,class:"game-content"},Za={class:"player-info"},et={class:"player-avatar-wrapper"},at={key:0,class:"avatar-decoration"},tt={class:"player-info-content"},nt={class:"player-name"},lt={class:"game-board-container"},st={class:"sound-controls"},ot=be(a({__name:"App",setup(e){const a=z(),y=h(!1),g=h(!0),f={common:{primaryColor:"#6366f1",primaryColorHover:"#818cf8",primaryColorPressed:"#4f46e5"}},w=()=>{var e,t;D.play("click"),null==(t=null==(e=a.dialogContent)?void 0:e.action)||t.call(e),a.closeDialog()},b=e=>{D.play("click"),a.updateSettings(e),y.value=!1},x=()=>{D.play("click"),g.value=D.toggleBGM()};return(e,h)=>{var C,M,F,B;const z=_("n-button"),P=_("n-card"),S=_("n-tag"),j=_("n-space"),U=_("n-message-provider"),A=_("n-notification-provider"),N=_("n-config-provider"),O=_("n-modal");return t(),n(u,null,[r(N,{"theme-overrides":f},{default:i((()=>[r(A,null,{default:i((()=>[r(U,null,{default:i((()=>[l("div",Wa,[r(We),l("div",Ga,[h[8]||(h[8]=l("div",{class:"game-header"},[l("h1",{class:"title"},[l("span",{class:"emoji"},"🎉"),l("span",{class:"title-text"},"芋泥生日快乐大富翁"),l("span",{class:"emoji"},"🎂")])],-1)),d(a).isGameStarted?(t(),n("div",Ya,[l("div",Za,[l("div",{class:"player-grid",style:p({gridTemplateColumns:"repeat(".concat(d(a).players.length,", 1fr)")})},[(t(!0),n(u,null,m(d(a).players,(e=>(t(),k(P,{key:e.id,class:v(["player-card",{active:d(a).currentPlayer===e.id}]),bordered:!1,size:"small"},{header:i((()=>[r(j,{align:"center"},{default:i((()=>[l("div",et,[l("div",{class:"player-avatar",style:p({backgroundImage:"url(/avatar".concat(e.id+1,".png)"),borderColor:e.color,boxShadow:"0 2px 8px ".concat(e.color,"80")})},null,4),d(a).currentPlayer===e.id?(t(),n("div",at,h[6]||(h[6]=[l("span",{class:"crown"},"👑",-1)]))):s("",!0)]),l("div",tt,[l("span",nt,o(e.name),1),r(S,{type:"success",size:"small",class:"player-money"},{icon:i((()=>h[7]||(h[7]=[l("span",{class:"money-icon"},"💰",-1)]))),default:i((()=>[c(" "+o(e.money.toLocaleString()),1)])),_:2},1024)])])),_:2},1024)])),_:2},1032,["class"])))),128))],4)]),l("div",lt,[r(Ie)])])):(t(),n("div",Va,[r(P,{class:"welcome-card"},{header:i((()=>h[3]||(h[3]=[l("div",{class:"welcome-header"},[l("div",{class:"welcome-title"},"欢迎来玩芋泥的生日快乐大富翁！"),l("div",{class:"welcome-subtitle"},"一起来玩吧~")],-1)]))),default:i((()=>[l("div",qa,[l("div",Ra,[(t(),n(u,null,m([2,3,4],(e=>r(z,{key:e,type:"primary",size:"large",round:"",class:"select-btn",style:{background:"linear-gradient(45deg, #FF69B4, #FFB6C1)",border:"none",outline:"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border":"none"},onClick:t=>{return n=e,D.play("click"),void a.initGame(n,a.settings.initialMoney);var n}},{default:i((()=>[l("div",$a,[l("div",Ka,o(["👥","👥👤","👥👥"][e-2]),1),l("span",Xa,o(e)+"人",1)])])),_:2},1032,["onClick"]))),64))]),l("div",Qa,[r(z,{class:"settings-btn",type:"default",size:"large",round:"",onClick:h[0]||(h[0]=e=>y.value=!0)},{icon:i((()=>h[4]||(h[4]=[l("div",{class:"btn-icon"},"⚙️",-1)]))),default:i((()=>[h[5]||(h[5]=c(" 游戏设置 "))])),_:1})])])])),_:1})]))])])])),_:1})])),_:1})])),_:1}),d(a).showDialog?(t(),k(na,{key:0,show:d(a).showDialog,title:(null==(C=d(a).dialogContent)?void 0:C.title)||"",message:(null==(M=d(a).dialogContent)?void 0:M.message)||"",type:(null==(F=d(a).dialogContent)?void 0:F.type)||"info",action:null==(B=d(a).dialogContent)?void 0:B.action,onClose:d(a).closeDialog,onAction:w},null,8,["show","title","message","type","action","onClose"])):s("",!0),r(O,{show:y.value,"onUpdate:show":h[2]||(h[2]=e=>y.value=e),preset:"card",style:{width:"90vw","max-width":"1000px"},title:"游戏设置",bordered:!1,segmented:!0},{default:i((()=>[r(Ja,{onSave:b,onCancel:h[1]||(h[1]=e=>y.value=!1)})])),_:1},8,["show"]),l("div",st,[r(z,{circle:"",size:"large",onClick:x,type:g.value?"primary":"default",class:"sound-btn"},{default:i((()=>[c(o(g.value?"🎵":"🔇"),1)])),_:1},8,["type"])])],64)}}}),[["__scopeId","data-v-900f3fb6"]]),rt=J({components:[j,L,W,G,V,q,R,S,E,P,U,$,K,X,Q,Y,Z,ee,ae,te,ne,le,se,oe,re]}),it=F(ot),ct=B();it.use(ct),it.use(rt),it.config.errorHandler=(e,a,t)=>{},it.mount("#app");const dt=document.querySelector("#loading");dt&&dt.remove();export{e as __vite_legacy_guard};
